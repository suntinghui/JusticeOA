<!doctype html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>会议详情</title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<link href="../css/mui.min.css" rel="stylesheet" />

		<style>
			body {
				width: 100%;
				height: 100%;
				background-color: white;
			}
			
			.mui-card .mui-control-content {
				padding: 10px;
			}
			
			.mui-control-content {
				position: absolute;
				margin-top: 100px;
				top: 0;
				left: 0;
				right: 0;
				bottom: 0;
			}
			
			.meeting-content {
				text-indent: 22px;
				font-size: 16px;
				color: #333333;
				margin: 15px;
			}
			
			.item-div {
				margin: 20px 20px 15px 10px;
				display: -webkit-box;
				-webkit-box-pack: center;
				-webkit-box-align: center;
			}
			
			.item-name {
				width: 30%;
				color: #666666;
				font-size: 16px;
			}
			
			.item-value {
				margin-left: 10px;
				width: 70%;
				color: #333333;
				font-size: 16px;
			}
		</style>
	</head>

	<body>

		<header class="mui-bar mui-bar-nav" style="background-color: #008FF7;">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left" style="color: #FFFFFF;"></a>
			<h1 class="mui-title" style="color: #FFFFFF;">会议详情</h1>
		</header>

		<div class="mui-content">
			<div style="padding: 10px 10px;">
				<div id="segmentedControl" class="mui-segmented-control">
					<a class="mui-control-item mui-active" href="#item1">会议内容</a>
					<a class="mui-control-item" href="#item2">参会信息</a>
				</div>
			</div>

			<div>
				<!--会议内容-->
				<div id="item1" class="mui-control-content mui-active">
					<div class="mui-scroll-wrapper scroll-content">
						<div class="mui-scroll left-content" id="meetingContent">
							<p class="meeting-content">
								测试数据 测试数据 2017年是党的十九大召开之年，是实施“十三五”规划和“七五”普法规划的重要一年，也是全面深化改革向纵深推进的关键一年。为切实做好司法行政各项工作，结合我区实际，制定本要点。 　　指导思想：全面贯彻落实党的十八大和十八届三中、四中、五中、六中全会精神，深入学习贯彻习近平总书记系列重要讲话精神和对司法行政工作重要指示，坚持稳中求进总基调，以“两件大事”安保为主线，紧紧围绕市、区两级“十三五”规划实施，自觉融入京津冀协同发展，扎实落实北京市"疏解整治促提升"专项行动，主动服务大局、服务民生，大力加强法治宣传、法律服务、法治保障三项职能，确保我局各项司法行政工作扎实推进、务求实效，为实现“建设绿色国际港、打造航空中心核心区、共筑和谐宜居新家园”的奋斗目标提供强有力的法治保障。 　　一、着力服务管理能力建设，律师管理工作见实效 　　1.加强行业建设。健全协会工作机制，完善内部规章制度，充分发挥专业委员会作用，促进律师间业务交流指导。充分发挥协会职能作用，强化律师执业权利保障。 　　2.加强律所建设。规范律所外观标识建设，推进全区律所标识规范化配置。以日常巡查检查与年度考核为抓手，加大律所监管力度。 　　3.加强队伍建设。强化律师行业党建，发挥党支部政治引领作用，继续推进律师“六星”党支部创建工作。规范律师执业行为，加强律师队伍教育管理，促进律师依法诚信执业。丰富拓展公益法律服务平台，巩固公益法律服务品牌效应，充分发挥村居法律顾问作用。 　　二、着力监管措施巩固落实，矫正帮教工作见实效 　　1.巩固和推进各项创新措施。做好电子监管指挥中心改造建设工作，提高社区服刑人员电子监管水平。做好专职评议员队伍管理考核，提升社区评议工作质量，组织开展新接收社区服刑人员初始集中教育活动。 　　2.加大矫正执法工作力度。严格社区矫正各个环节的执法程序，做到环节清楚、时限明确、执法规范、核审及时、记录全面。加大社区矫正执法督查力度，开展司法所社区矫正档案集中督查工作。 　　3.确保日常管控措施保障到位。落实帮扶制度，做好“三无人员”和“特殊老病伤残人员”等特困人员的救助管理。强化矫正协管员队伍管理。做好全国安置帮教信息管理系统应用和运行管理工作。 　　三、着力夯实基础工作，人民调解工作见实效 　　1.加强人民调解组织建设。加强规范化调解委员会硬件建设，进一步规范人民调解档案工作。推动人民调解员队伍专业化和职业化建设。 　　2.加强法律服务所业务指导。大力推进基层法律服务所统一社会信用代码制度建设。落实《北京市司法行政机关基层法律服务类行政处罚裁量基准》，规范全区各法律服务所服务行为。加强基层法律服务工作者职业道德和执业纪律教育。 　　四、着力提高服务效能，法律援助工作见实效 　　1.推进服务平台信息化建设。进一步完善法律援助服务平台建设和应用，提升便民服务能力和工作效率。 　　2.完善法律援助工作机制。加强和完善法律援助工作站建设，提升工作站服务能力和覆盖面，努力为受援人提供便捷高效的法律援助服务。加强法律援助值班律师和志愿者队伍管理。 　　3.加强法律援助案件质量管理。健全动态案件监督机制；进一步提升法律援助应援尽援合格率和法律援助案件受理数量。 　　4.扩大法律援助服务范围。严格落实《北京市人民政府关于扩大法律援助事项范围的通知》要求。开展法律援助专项维权活动，依法维护经济困难的妇女、残疾人、未成年人、军人军属、老年人和农民工等特殊群体的合法权益。 　　五、着力健全普法体系，法治宣传教育工作见实效 　　1.推进“七五”普法规划落实。落实普法责任制，抓好重点普法对象的学法用法工作。 　　2.加强普法平台建设。推进法治宣传教育基地建设，通过活动引领，积极发挥已建成基地的作用。探索新媒体技术应用，加强与相关部门合作，研究推进法治宣传教育网络信息平台建设。 　　3.开展法治宣传重点活动。结合区域中心工作和重要节点，组织丰富多彩的法治宣传教育活动，开展“12.4”国家宪法日暨全国法治宣传日活动。 　　六、着力提升服务水平，公证服务工作见实效 　　1.提高公证服务效能。进一步规范和优化公证流程，完善工作制度，推进公证工作信息化建设。 　　2.提升公证服务质量。加强公证队伍综合素质建设，狠抓案卷质量检查，严格落实全市公证行业便民利民措施。 　　七、着力规范化建设，依法行政工作见实效 　　1.筑牢依法行政基础。严格落实依法行政、政务公开各项规定，及时做好规范性文件审查、备案、清理和立改废工作，全面提升全局依法行政水平。 　　2.提升行政执法水平。落实行政执法核审相关规定，及时做好权力清单和责任清单动态调整工作。加强行政执法人员培训，提高执法人员专业水平。
							</p>
						</div>
					</div>
				</div>

				<!--参会信息-->
				<div id="item2" class="mui-control-content">
					<div class="mui-scroll-wrapper scroll-content">
						<div class="mui-scroll right-content" id="meetingInfo">
						</div>
					</div>
				</div>

			</div>
		</div>

		<script src="../js/mui.min.js"></script>
		<script src="../js/constants.js" type="text/javascript" charset="utf-8"></script>
		<script type="text/javascript" src="../js/util.js"></script>
		<script src="../js/base64.js" type="text/javascript" charset="utf-8"></script>

		<script>
			mui.init();
			
			var meetingId = window.localStorage.getItem('meetingId');

			window.onload = function() {
				requestDetail();
			};

			(function($) {
				$('.scroll-content').scroll({
					indicators: true //是否显示滚动条
				});
			})(mui);

			function requestDetail() {
				checkNetwork();
				
				mui.plusReady(function() {
					plus.nativeUI.showWaiting("正在加载...");
				});

				var url = HOST + "Meeting.ashx?Commond=GetMeetingInfo&tokenKey=" + window.localStorage.getItem(TokenKey) + "&mettingId=" + meetingId;
				mui.ajax(url, {
					dataType: 'json', //服务器返回json格式数据
					type: 'get', //HTTP请求类型
					timeout: 10000, //超时时间设置为10秒；
					headers: {
						'Content-Type': 'application/json'
					},
					success: function(data) {
						console.log(JSON.stringify(data));
						responseDetail(data);

						mui.plusReady(function() {
							plus.nativeUI.closeWaiting();
							mui.currentWebview.show();
						});
					},
					error: function(xhr, type, errorThrown) {
						mui.alert(getHttpErrorDesp(type), "提示", null);

						mui.plusReady(function() {
							plus.nativeUI.closeWaiting();
						});
					}
				});
			};

			function responseDetail(resp) {
				requestAttList(resp.BusId);
				//refreshContent(resp);
				refreshInfo(resp);
			};

			function refreshContent(resp) {
				var meetingContent = document.getElementById("meetingContent");
				// 首先清空下面的所有结点
				while(meetingContent.hasChildNodes()) {
					meetingContent.removeChild(meetingContent.firstChild);
				}

				// 开始添加新的节点
				var fragment = document.createDocumentFragment();
				var p = document.createElement('p');
				p.className = 'meeting-content';
				p.innerText = resp.ByteContent;
				fragment.appendChild(p);
				meetingContent.appendChild(fragment);
			}

			function refreshInfo(resp) {
				var meetingInfo = document.getElementById("meetingInfo");
				// 首先清空下面的所有结点
				while(meetingInfo.hasChildNodes()) {
					meetingInfo.removeChild(meetingInfo.firstChild);
				}
				// 开始添加新的节点
				var fragment = document.createDocumentFragment();
				fragment.appendChild(createInfoItem("会议主题：", resp.MettingTitle));
				fragment.appendChild(createInfoItem("开始时间：", resp.StartDate));
				fragment.appendChild(createInfoItem("结束时间：", resp.EndDate));
				fragment.appendChild(createInfoItem("会议地点：", resp.MettingAddress));
				fragment.appendChild(createInfoItem("会议类型：", resp.MettingTypeName));
				fragment.appendChild(createInfoItem("参会人员：", resp.Participant));

				meetingInfo.appendChild(fragment);
			}

			function createInfoItem(name, value) {
				var div = document.createElement('div');
				div.className = "item-div";
				div.innerHTML = '<div class="item-name">' + name + '</div><div class="item-value">' + value + '</div>';
				return div;
			}

			// 查询附件信息
			function requestAttList(busId) {
				var url = HOST + "ATTManager.ashx?Commond=GetAttList&busId=" + busId;
				mui.ajax(url, {
					dataType: 'json', //服务器返回json格式数据
					type: 'get', //HTTP请求类型
					timeout: 10000, //超时时间设置为10秒；
					headers: {
						'Content-Type': 'application/json'
					},
					success: function(data) {
						console.log(JSON.stringify(data));
						
						plus.nativeUI.closeWaiting();
					},
					error: function(xhr, type, errorThrown) {
						mui.alert(getHttpErrorDesp(type), "提示", null);
					}
				});

			}
		</script>
	</body>

</html>